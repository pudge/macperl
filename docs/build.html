<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/2000/REC-xhtml1-20000126/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
	<title>MacPerl Build Process</title>
	<meta name="generator" content="BBEdit 6.0.2" />
	<base href="http://macperl.sourceforge.net/build.html" />
	<link rel="stylesheet" type="text/css" href="/style.css" />
	<script type="text/javascript" charset="iso-8859-1">
		// <![CDATA[

			var notes = new Array();
			notes[1] = 'Later versions of SC/MrC may not be fully compatible.';
			notes[2] = 'In MPW you must hit "enter" or "cmd"+"return" to execute a command on a line.';

			function set_status (num) {
				self.status = notes[num];
				return true;
			}

			function no_click (num) {
				alert(notes[num]);
				return false;
			}

		// ]]>
	</script>
</head>
<body>

<h1 class="head">MacPerl Build Process (Unfinished)</h1>

<p>

<a href="http://sourceforge.net">
	<img src="http://sourceforge.net/sflogo.php?group_id=7940&amp;type=1" width="88" height="31" alt="*" />
</a>

<img src="/MacPerl.gif" width="32" height="32" alt="*" />

These are the install procedures for
<a href="http://macperl.sourceforge.net/">MacPerl</a> version 5.6.  Please send feedback to the
<a href="http://lists.perl.org/showlist.cgi?name=macperl-porters">macperl-porters</a> list,
and <a href="http://sourceforge.net/bugs/?func=addbug&amp;group_id=7940">submit bugs
at SourceForge</a>.
</p>


<p>
To build MacPerl, you will need a Mac and plenty of RAM.  The build goes
fine with my PowerBook G3/400 with 256MB, but has some problems on my
iBook 333 with 128MB.  Sometimes MPW runs out of memory, and I need to
restart MPW -- or the machine -- to continue.
</p>

<p>
You will also need a working knowledge of Mac OS and MPW,
the Macintosh Programmer's Workshop.  If you don't know MPW,
you can mostly pick it up along the way if you have any familiarity
with command lines.
</p>

<p>
For now, some of the smaller tools, and shared libraries, cannot be built
with an SC/MrC-only build, and there is no CFM68K support.
</p>


<h2><a name="ingredients">Ingredients</a></h2>

<p>
Some version numbers are noted.  These are the minimum
recommended versions for building with.
</p>

<ul>
	<li><strong><a href="ftp://macperl.sourceforge.net//pub/macperl/macperl_build_libs.sit.bin">macperl_build_libs.sit</a></strong>,
		a collection of freely available libraries and
		tools for building MacPerl.  It includes dmake,
		patch, sfio, XL, AEGizmos, MoreFiles, and
		Internet Config.  Each of these packages is also
		<a href="ftp://macperl.sourceforge.net//pub/macperl/macperl_build_libs/">available separately</a>.
		However, there are some aliases in the main distribution
		set up especially for the build, so if you get the
		individual packages you might have some broken paths.</li>

	<li><strong><a href="http://sourceforge.net/projects/gusi/">GUSI 2</a></strong>
		(GUSI_215 or later; get the Pro5 libs in addition if using CodeWarrior
		Pro 5)</li>

	<li><strong><a href="http://developer.apple.com/tools/mpw-tools/">MPW</a></strong>,
		the complete installation from Apple</li>

	<li><strong><a href="http://www.metrowerks.com/">Metrowerks</a>
		CodeWarrior compilers for MPW</strong> (Pro 5 recommended; MWC68K 2.3.2 build 79, MWCPPC 2.3.2 build 75) 
		<em>or</em> of the <strong>MPW C/C++ compilers</strong>
		(SC 8.8.4f1, MrC 4.1.0f1c1)
		<sup><a href="#" onmouseover="set_status(1);" onclick="return no_click(1);">1</a></sup>
	</li>

	<li><strong><a href="http://sourceforge.net/project/showfiles.php?group_id=7940&amp;release_id=20742">MacPerl and the perl MPW tool</a></strong>
		(the current releases; perl itself is used for part of the build)</li>

	<li><strong><a href="http://www.stlport.org/">STLport</a></strong> (3.12.3), if building with SC / MrC</li>

	<li>(Perl and MacPerl source)</li>
</ul>



<h2><a name="recipe">Recipe</a></h2>

<ol>
	<li><p>Unpack the macperl_build_libs.sit archive, which will create
		a folder called <i>macperl</i>.  Put it in a location
		such that the path to the directory has
		no whitespace or odd characters in it.  So "HD:macperl:" is fine, but
		"Macintosh HD:macperl:" is not.  Yes, you may need to change your
		hard drive's name.  Sorry.  :-)  My location preference is
		"HD:src:", and then everything gets put in there.
		This will be your main build folder.</p></li>

	<li><p>Unpack and install MPW.  The easiest way to do this is to get
		the single MPW-GM image from Apple's site, mount the image,
		and drag the folder in the image to your drive.</p></li>

	<li><p>Copy the patch and dmake tools, and the startup.mk file from
		the dmake distribution, to the MPW <i>Tools</i> folder.
		Copy the BuildProgram and BuildCommands scripts from
		the dmake folder to the MPW <i>Scripts</i> folder,
		overwriting the existing scripts of the same name
		(backup the old ones if you want to).</p></li>

	<li><p>Unpack the GUSI distribution.  If using CodeWarrior Pro 5,
		also unpack the Pro5 archive, and replace the existing GUSI
		libraries with the ones in the Pro5 distribution.  If using SC/MrC,
		unpack the STLport distribution into the same location as where
		the GUSI distribution is unpacked, so each folder is
		within the same enclosing folder.</p></li>

	<li><p>Give the <i>MPW Shell</i> application plenty of RAM (I
		gave it 30MB) and make sure you have plenty of extra RAM
		while the app is running (another 30MB might be sufficient).
		Then run the application.  If you wish, create a new document to
		work in.</p></li>

	<li><p>Change directory (using the "directory" command) in MPW to the
		GUSI directory, and run the <i>GUSI_Install.MPW</i> script.
		<sup><a href="#" onmouseover="set_status(2);" onclick="return no_click(2);">2</a></sup></p><pre>
			directory "Bourque:Prog:src:GUSI_215"
			GUSI_Install.MPW</pre>
		
		<p>If using STLport (SC/MrC builds), also run the
		<i>STLport_Install.MPW</i> script here.</p></li>

	<li><p>Change directory to the sfio directory, and execute the
		<i>Sfio_Install.MPW</i> script.</p></li>

	<li><p>If using the Metrowerks compilers, execute the
		<i>CW_Max_NoDup_Update</i> script.</p></li>

	<li><p>If not already installed, install MacPerl, and the perl MPW tool.
		The main MacPerl distribution must be installed for
		the perl MPW tool to have access to the Perl library.
		To install the MPW tool, see the documentation that
		comes with it.</p></li>

	<li><p><i>Instructions for setting up perl src goes here.</i></p></li>

	<li><p>Open <i>:macperl:perl:macos:MacPerlConfig.mk</i> and
		change the preferences there for the compilers you will
		be using.  If using SC/MrC: open
		<i>:macperl:perl:macos:Makefile.mk</i> and comment out
		the "BuildProgram all" part of the "translators" target.</p></li>

	<li><p>Quit and restart MPW Shell, so the startup files will
		be executed, or execute the MPW startup files
		manually.</p></li>

	<li><p>Change directory in MPW to <i>:macperl:perl:macos:</i> and
		execute <tt>buildprogram all</tt>.  This could take up
		to an hour, and will build all of the MPW tools
		and perl modules for the compilers you chose.</p></li>

	<li><p>Change directory in MPW to <i>:macperl:macos:</i> and
		execute <tt>buildprogram all</tt>.  This will build
		the MacPerl application and supporting files.</p></li>

	<li><p>Do a happy dance.  You're done.</p></li>

</ol>


<h2><a name="cvs">CVS</a></h2>

<p>

Feel free to check out the source from CVS.  I recommend
<a href="http://cvsgui.sourceforge.net/">maccvs</a>, which includes
an MPW tool and a GUI application.  You will log in anonymously
to check out the source.  The host is cvs.macperl.sourceforge.net,
the cvsroot is /cvsroot/macperl, and the two CVS modules are
"macperl" and "perl".  See the
<a href="http://sourceforge.net/cvs/?group_id=7940">SourceForge</a>
page for more information.  You can also
<a href="http://cvs.sourceforge.net/cgi-bin/cvsweb.cgi?cvsroot=macperl">browse the repository</a>
via the web.

</p>


<noscript>
<p class="notes">
	<sup>1</sup> Later versions of SC/MrC may not be fully compatible.<br />
	<sup>2</sup> In MPW you must hit "enter" or "cmd"+"return" to
		execute a command on a line.<br />
</p>
</noscript>

<p>Good luck, and have fun.</p>

<p><i>Matthias Neeracher &amp; Chris Nandor</i></p>

<p class="notes">
$Id$
</p>

</body>
</html>
