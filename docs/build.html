<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/2000/REC-xhtml1-20000126/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
	<title>MacPerl Build Process</title>
	<meta name="generator" content="BBEdit 6.0.2" />
	<base href="http://macperl.sourceforge.net/build.html" />
	<link rel="stylesheet" type="text/css" href="/style.css" />
	<script type="text/javascript" charset="iso-8859-1">
		// <![CDATA[

			var notes = new Array();
			notes[1] = 'Ports by Matthias Neeracher of freely available software.';
			notes[2] = 'By Matthias Neeracher.';
			notes[3] = 'Same as available source from Apple, but prebuilt libraries.';
			notes[4] = 'Same as available source from Apple.';
			notes[5] = 'Same as available source from Stairways.';
			notes[6] = 'Small tool included with MacPerl source, used for build process, but currently only built with MWC68K compiler, so it is only necessary to download prebuilt binary for non-MWC builds.';
			notes[7] = 'Later versions of SC/MrC may not be fully compatible.';
			notes[8] = 'In MPW you must hit "enter" or "cmd"+"return" to execute a command on a line.';

			function set_status (num) {
				self.status = notes[num];
				return true;
			}

			function no_click (num) {
				alert(notes[num]);
				return false;
			}

		// ]]>
	</script>
</head>
<body>

<h1 class="head">MacPerl Build Process</h1>

<p>
These are the install procedures for
<a href="http://macperl.sourceforge.net/">MacPerl</a> version 5.6.
Please send feedback to the <a href="http://lists.perl.org/">macperl-porters</a> list,
and <a href="http://sourceforge.net/bugs/?func=addbug&amp;group_id=7940">submit bugs
at SourceForge</a>.
</p>


<h2>Notes</h2>

<p>
To build MacPerl, you will need a Mac and plenty of RAM.  The build goes
fine with my PowerBook G3/400 with 256MB, but has some problems on my
iBook 333 with 128MB.  Sometimes MPW runs out of memory, and I need to
restart MPW -- or the machine -- to continue.
</p>

<p>
You will also need a working knowledge of Mac OS and MPW,
the Macintosh Programmer's Workshop.  If you don't know MPW,
you can mostly pick it up along the way if you have any familiarity
with command lines.
</p>

<p>
For now, some of the smaller tools, and shared libraries, cannot be built
with an SC/MrC-only build, and there is no CFM68K support.
</p>


<h2>Ingredients</h2>

<p>Some version numbers are noted.  These are the recommended versions
for building with.</p>

<p>Hm.  Should I just put dmake, patch, sfio, db, XL, AE, IC in one big archive?</p>

<ul>
	<li>The following packages are provided at
		&lt;<a href="ftp://macperl.sourceforge.net//pub/macperl/build/">ftp://macperl.sourceforge.net//pub/macperl/build/</a>&gt;.
		<ul>
			<li>dmake <sup><a href="#" onmouseover="set_status(1);" onclick="return no_click(1);">1</a></sup></li>
			<li>Patch <sup><a href="#" onmouseover="set_status(1);" onclick="return no_click(1);">1</a></sup></li>
			<li>sfio (sfio_04Aug99) <sup><a href="#" onmouseover="set_status(1);" onclick="return no_click(1);">1</a></sup></li>
			<li>(Berkeley) db (db_186) <sup><a href="#" onmouseover="set_status(1);" onclick="return no_click(1);">1</a></sup></li>
			<li>XL (XL_15) <sup><a href="#" onmouseover="set_status(2);" onclick="return no_click(2);">2</a></sup></li>
			<li>AEGizmos (1.4.2) <sup><a href="#" onmouseover="set_status(3);" onclick="return no_click(3);">3</a></sup></li>
			<li>MoreFiles (1.5) <sup><a href="#" onmouseover="set_status(4);" onclick="return no_click(4);">4</a></sup></li>
			<li>Internet Config kit (icprogkit-202-source) <sup><a href="#" onmouseover="set_status(5);" onclick="return no_click(5);">5</a></sup></li>
			<li>UnPreload <sup><a href="#" onmouseover="set_status(6);" onclick="return no_click(6);">6</a></sup></li>
		</ul>
	</li>

	<li><a href="http://sourceforge.net/projects/gusi/">GUSI 2</a> (GUSI_215 or later)</li>
	<li>A complete installation of <a href="http://developer.apple.com/tools/mpw-tools/">MPW</a></li>
	<li>A reasonably recent version of the <a href="http://www.metrowerks.com/">Metrowerks</a>
		CodeWarrior compilers for MPW (Pro 5 recommended) 
		<em>or</em> of the MPW C/C++ compilers (I used SC 8.8.4f1, MrC 4.1.0f1c1,
		MWC68K 2.3.2 build 79, and MWCPPC 2.3.2 build 75)
		<sup><a href="#" onmouseover="set_status(7);" onclick="return no_click(7);">7</a></sup>
	</li>
	<li>If not already installed, get the
		<a href="http://sourceforge.net/project/showfiles.php?group_id=7940&amp;release_id=20742">current
		releases of MacPerl and the perl MPW tool</a> (perl itself is
		used for part of the build).</li>
	<li><a href="http://www.stlport.org/">STLport</a> (3.12.3), if building with SC / MrC</li>
	<li>(Perl and MacPerl source)</li>
</ul>



<h2>Recipe</h2>

<ol>
	<li><p>Unpack and install MPW.  The easiest way to do this is to get
		the single MPW-GM image from Apple's site, mount the image,
		and drag the folder in the image to your drive.</p></li>

	<li><p>Unpack the patch and dmake archives, and copy the patch and dmake
		tools to the MPW <i>Tools</i> folder.</p></li>

	<li><p>Copy the BuildProgram and BuildCommands scripts from
		the dmake distribution to the MPW <i>Scripts</i> folder,
		overwriting the existing scripts of the same name
		(back up the old ones if you want to).</p></li>

	<li><p>Create a folder <i>MacPerl</i>, such that the path to the directory has
		no whitespace or odd characters in it.  So "HD:macperl:" is fine, but
		"Macintosh HD:macperl:" is not.  This will be your main build
		folder.</p></li>
	
	<li><p>Make sure that the db, XL, MoreFiles, and AEGizmos distributions
		are in the <i>MacPerl</i> folder, and that each is named exactly
		as <i>db</i>, <i>XL</i>, <i>MoreFiles</i>, <i>AEGizmos</i>,
		respectively (aliases may work, too).</p>
		
		<p>For IC, move the <i>APIs</i> folder (or an alias to it)
		from inside the IC distribution and put it in the MacPerl folder,
		and rename it <i>IC</i>.</p></li>

	<li><p>Unpack the GUSI and sfio distributions.  If using SC/MrC, unpack
		the STLport distribution into the same location as where
		the GUSI distribution is unpacked, so each folder is
		within the same enclosing folder.</p></li>

	<li><p>Run <i>MPW Shell</i>.  If you wish, create a new document to
		work in.</p></li>

	<li><p>Change directory (using the "directory" command) in MPW to the
		GUSI directory, and run the <i>GUSI_Install.MPW</i> script.
		<sup><a href="#" onmouseover="set_status(8);" onclick="return no_click(8);">8</a></sup></p><pre>
			directory "Bourque:Prog:src:GUSI_215"
			GUSI_Install.MPW</pre>
		
		<p>If using STLport, also run the <i>STLport_Install.MPW</i> script
		here.  Also, copy <i>UnPreload</i> to the <i>:macperl:perl:macos:</i>
		folder.
		</p></li>

	<li><p>Change directory to the sfio directory, and execute the
		<i>Sfio_Install.MPW</i> script.</p></li>

	<li><p>If using the Metrowerks compilers, execute the
		<i>CW_Max_NoDup_Update</i> script.</p></li>

	<li><p>If not already installed, install MacPerl, and the perl MPW tool.</p></li>

	<li><p><i>Instructions for setting up perl src goes here.</i></p></li>

	<li><p>Open <i>:macperl:perl:macos:MacPerlConfig.mk</i> and
		change the preferences there for the compilers you will
		be using.  If using SC/MrC, also open
		<i>:macperl:perl:macos:MacPerlConfig.mk</i> and remove
		"UnPreload" from the "miniperl" and "perl" targets.
		Hm, need to talk about dynamic stuff, too.</p></li>

	<li><p>Change directory in MPW to <i>:macperl:perl:macos:</i> and
		execute <tt>buildprogram all</tt>.  This could take up
		to an hour, and will build all of the MPW tools
		and perl modules.</p></li>

	<li><p>Change directory in MPW to <i>:macperl:macos:</i> and
		execute <tt>buildprogram all</tt>.  This will build
		the MacPerl application and supporting files.</p></li>

	<li><p>Do a happy dance.  You're done.</p></li>

</ol>

<noscript>
<p class="notes">
	<sup>1</sup> Ports by Matthias Neeracher of freely available software.<br />
	<sup>2</sup> By Matthias Neeracher.<br />
	<sup>3</sup> Same as available source from Apple, but prebuilt libraries.<br />
	<sup>4</sup> Same as available source from Apple.<br />
	<sup>5</sup> Same as available source from Stairways.<br />
	<sup>6</sup> Small tool included with MacPerl source, used for build process,
		but currently only built with MWC68K compiler, so it is only
		necessary to download prebuilt binary for non-MWC builds.<br />
	<sup>7</sup> Later versions of SC/MrC may not be fully compatible.<br />
	<sup>8</sup> In MPW you must hit "enter" or "cmd"+"return" to
		execute a command on a line.<br />
</p>
</noscript>

<p>Good luck, and have fun.</p>

<p><i>Matthias Neeracher &amp; Chris Nandor</i></p>

<p class="notes">
$Id$
</p>

</body>
</html>
